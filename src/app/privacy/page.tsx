import type { Metadata } from "next";
import Link from "next/link";

export const metadata: Metadata = {
  title: "隐私政策 - 行途",
  description: "行途（Go Nomads）隐私政策，了解我们如何收集、使用和保护您的个人信息。",
};

/* ───── 章节数据 ───── */
const sections = [
  {
    id: "intro",
    title: "引言",
    content: `欢迎使用「行途」（Go Nomads）。行途是一款专为数字游民打造的一站式社区与服务平台，提供城市探索、共享办公空间查询、社区活动、即时通讯、AI 行程规划等功能。我们深知个人信息对您的重要性，并将竭尽全力保护您的隐私安全。本隐私政策详细说明了我们在您使用行途移动应用程序（iOS/Android）、网站及相关服务时，如何收集、使用、存储、共享和保护您的个人信息。使用我们的服务即表示您同意本政策中描述的数据处理方式。`,
  },
  {
    id: "collect",
    title: "我们收集的信息",
    content: `我们可能收集以下类型的信息：

**1. 您主动提供的信息**
• 账号信息：手机号码、邮箱地址、用户名、头像、个人简介等注册与个人资料信息。
• 社区内容：您发布的帖子、评论、活动信息、共享办公空间评价等用户生成内容。
• 通讯信息：您通过即时聊天功能发送的消息内容（端到端加密传输）。
• 支付信息：当您使用付费功能时，我们会收集必要的交易信息，但不直接存储您的银行卡号或支付密码。
• 行程数据：您在 AI 行程规划功能中输入的旅行偏好和目的地信息。

**2. 自动收集的信息**
• 设备信息：设备型号、操作系统版本、唯一设备标识符、屏幕分辨率、语言设置。
• 日志信息：访问时间、浏览页面、崩溃日志、功能使用频率。
• 网络信息：IP 地址、网络类型、运营商信息。

**3. 经您授权后收集的信息**
• 位置信息：用于推荐附近城市、共享办公空间和活动（仅在您授权后收集）。
• 相机与相册：用于上传头像和社区内容中的图片。
• 通知权限：用于推送活动提醒、消息通知等。`,
  },
  {
    id: "usage",
    title: "信息使用方式",
    content: `我们收集的信息将用于以下用途：

• **提供核心服务**：账号注册与登录、城市信息展示、共享办公空间查询、社区功能、即时通讯、AI 行程规划。
• **个性化体验**：根据您的位置和偏好推荐城市、办公空间和社区活动。
• **服务改进**：分析服务使用情况与性能数据，优化产品功能与用户体验。
• **安全保障**：识别与防范欺诈行为、垃圾信息及安全威胁，保护您的账号安全。
• **通知与沟通**：发送服务通知、活动提醒和安全警报。
• **付费功能**：处理订阅和付费交易，提供客户支持。
• **法律合规**：遵守适用的法律法规要求。`,
  },
  {
    id: "sharing",
    title: "信息共享与披露",
    content: `我们不会出售您的个人信息。仅在以下情形下，我们可能会与第三方共享您的信息：

• **服务提供商**：我们与受信任的第三方合作来运营服务，包括云存储（服务器托管）、消息推送、支付处理和数据分析服务商。这些合作方仅能在为我们提供服务的范围内访问您的信息，并受到严格的数据保护协议约束。
• **社区互动**：您在社区中公开发布的内容（帖子、评价、活动信息）对其他用户可见，请谨慎分享个人敏感信息。
• **法律要求**：当法律法规要求、政府部门依法调查或为保护我们及用户的合法权益时，我们可能会披露您的信息。
• **业务转让**：如发生合并、收购或资产出售，您的信息可能作为交易资产的一部分被转移，届时我们会通知您。
• **征得同意**：在上述情形之外，我们将在征得您明确同意后才共享您的信息。`,
  },
  {
    id: "storage",
    title: "数据存储与安全",
    content: `• **存储位置**：您的数据存储在位于安全数据中心的云服务器上，我们选择符合行业安全标准的云服务提供商。
• **存储期限**：我们仅在实现本政策所述目的所需的最短时间内保留您的个人信息。当您注销账号后，我们将在合理期限内删除或匿名化您的个人数据，法律法规另有要求的除外。
• **安全措施**：我们采用业界标准的安全技术保护您的数据，包括但不限于：
  — HTTPS/TLS 加密传输
  — 数据库加密存储
  — 访问控制与权限管理
  — 定期安全审计与漏洞扫描
  — 消息通讯端到端加密
• **安全事件**：尽管我们尽力保护数据安全，但无法保证绝对安全。如发生数据泄露，我们将按照法律要求及时通知受影响的用户并采取补救措施。`,
  },
  {
    id: "cookies",
    title: "Cookie 与追踪技术",
    content: `我们的网站和应用可能使用以下技术：

• **必要性 Cookie**：维持您的登录状态和基本功能偏好，无法关闭。
• **分析类 Cookie**：帮助我们了解用户如何使用服务，以便改进产品体验（如页面访问量、功能使用率）。
• **设备标识符**：在移动应用中用于推送通知和崩溃分析。

您可以通过浏览器设置管理或禁用 Cookie。请注意，禁用某些 Cookie 可能导致部分功能无法正常使用。我们不使用 Cookie 向第三方广告平台提供您的个人数据。`,
  },
  {
    id: "rights",
    title: "您的权利",
    content: `根据适用的数据保护法律，您享有以下权利：

• **访问权**：您可以随时在应用内查看和访问您的个人资料信息。
• **更正权**：您可以在个人设置中修改、更新您的账号信息和个人资料。
• **删除权**：您可以申请删除您的账号及关联的个人数据。请通过「设置 > 账号 > 注销账号」操作，或发送邮件至 hi@gonomads.app 提交删除请求。我们将在 15 个工作日内处理。
• **数据导出**：您可以申请导出您的个人数据副本，我们将以通用格式提供。
• **撤回同意**：您可以随时在设备系统设置中撤回位置、相机、通知等权限的授权。撤回同意不影响此前基于您同意的处理行为的合法性。
• **限制处理**：在特定情况下，您有权要求我们限制对您个人信息的处理。

如需行使上述权利，请联系 hi@gonomads.app，我们将在核实您的身份后尽快处理。`,
  },
  {
    id: "children",
    title: "儿童隐私",
    content: `行途的服务面向 16 周岁及以上的用户。我们不会在知情的情况下收集 16 周岁以下儿童的个人信息。如果我们发现无意中收集了儿童的个人信息，将立即采取措施删除相关数据。如果您是家长或监护人，发现您的孩子在未经同意的情况下向我们提供了个人信息，请联系 hi@gonomads.app，我们将及时处理。`,
  },
  {
    id: "changes",
    title: "隐私政策变更",
    content: `我们可能会不时更新本隐私政策，以反映服务变化或法律法规的要求。更新后的政策将在本页面发布，并更新顶部的「生效日期」。对于重大变更，我们将通过应用内通知、推送消息或电子邮件等方式提前告知您。建议您定期查阅本政策，了解我们最新的隐私保护措施。继续使用我们的服务即表示您接受更新后的隐私政策。`,
  },
  {
    id: "contact",
    title: "联系我们",
    content: `如果您对本隐私政策有任何疑问、意见或请求，欢迎通过以下方式联系我们：

• 电子邮件：hi@gonomads.app
• 应用内反馈：设置 > 帮助与反馈

我们将在收到您的请求后 15 个工作日内予以回复。感谢您对行途的信任与支持。`,
  },
];

/* ───── 页面 ───── */
export default function PrivacyPage() {
  return (
    <div className="min-h-screen bg-base-200">
      {/* 导航 */}
      <nav className="navbar sticky top-0 z-50 bg-base-100/80 backdrop-blur-lg border-b border-base-200">
        <div className="navbar-start">
          <Link href="/" className="text-xl font-bold text-primary">行途</Link>
        </div>
        <div className="navbar-end">
          <Link href="/" className="btn btn-ghost btn-sm">返回首页</Link>
        </div>
      </nav>

      {/* 正文 */}
      <main className="max-w-3xl mx-auto px-6 py-16">
        <h1 className="text-4xl font-bold mb-2">隐私政策</h1>
        <p className="text-base-content/60 mb-12">生效日期：2026 年 2 月 10 日</p>

        <div className="space-y-12">
          {sections.map(({ id, title, content }) => (
            <section key={id} id={id}>
              <h2 className="text-2xl font-semibold mb-4">{title}</h2>
              <div className="prose prose-sm max-w-none text-base-content/80 whitespace-pre-line leading-relaxed [&>*]:my-0">
                {content.split("\n\n").map((para) => (
                  <p key={`${id}-p-${para.slice(0, 20)}`} className="mb-4">
                    {para.split(/\*\*(.*?)\*\*/g).map((seg, j) =>
                      j % 2 === 1 ? <strong key={`${id}-s-${seg.slice(0, 12)}`}>{seg}</strong> : seg
                    )}
                  </p>
                ))}
              </div>
            </section>
          ))}
        </div>
      </main>

      {/* 页脚 */}
      <footer className="border-t border-base-300 py-8 text-center text-sm text-base-content/50">
        <p>© 2026 行途（Go Nomads）· 保留所有权利</p>
      </footer>
    </div>
  );
}
